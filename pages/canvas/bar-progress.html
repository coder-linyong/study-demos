<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>进度条</title>
</head>
<body>
<canvas width="700" height="700">不支持canvas</canvas>
</body>
<script>
  (function () {
    let percentage = 0
    const canvas = document.querySelector('canvas')
    if (!canvas?.getContext ?? true) {
      return false
    }
    const {width,height}=canvas
    const ctx = canvas.getContext('2d'),
      barWidth = width * .8,
      barHeight = 100,
      color = 'red',
      x=(width - barWidth) / 2

    function render() {
      ctx.clearRect(0, 0, width, height)
      ctx.rect(x, 100, barWidth, barHeight)
      ctx.strokeStyle = color
      ctx.stroke()
      ctx.fillStyle = color
      ctx.fillRect(x, 100, percentage * barWidth / 100, barHeight)
      ctx.textAlign = 'center'
      ctx.font = 'bold 48px serif'
      ctx.fillText(`${percentage++}%`, width / 2, 220 + barHeight)
      if (percentage <= 100) {
        requestAnimationFrame(render)
      }
    }

    render()
  })()
</script>
</html>
