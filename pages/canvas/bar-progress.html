<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<canvas width="700" height="700">不支持canvas</canvas>
</body>
<script>
  let percentage = 0

  function render() {
    const canvas = document.querySelector('canvas')
    if (!canvas?.getContext ?? true) {
      return false
    }
    const ctx = canvas.getContext('2d')
    const barWidth = canvas.width * .8
    const barHeight = 100
    const color = 'red'
    ctx.clearRect(0, 0, canvas.width, canvas.height)
    ctx.rect((canvas.width - barWidth) / 2, 100, barWidth, barHeight)
    ctx.strokeStyle = color
    ctx.stroke()
    ctx.fillStyle = color
    ctx.fillRect((canvas.width - barWidth) / 2, 100, percentage * barWidth / 100, barHeight)
    ctx.textAlign = 'center'
    ctx.font = 'bold 48px serif'
    ctx.fillText(`${percentage++}%`, canvas.width / 2, 220 + barHeight)
    if (percentage <= 100) {
      requestAnimationFrame(render)
    }
  }

  render()
</script>
</html>
